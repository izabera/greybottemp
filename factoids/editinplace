http://backreference.org/2011/01/29/in-place-editing-of-files/