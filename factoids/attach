To attach files to email in a script, use mutt or nail. If you are on a piece of shit legacy machine and have to use mail/mailx, see http://www.shelldorado.com/articles/mailattachments.html