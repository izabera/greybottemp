https://gist.githubusercontent.com/deepcube/32257879f19df9644ad1/raw/7f2a2503b3d188b449d61fbe8411f66f9ba0afc1/rev.c