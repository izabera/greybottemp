Don't do it in Bash -- another language or tool is almost certainly better suited for your problem. See http://mywiki.wooledge.org/BashWeaknesses