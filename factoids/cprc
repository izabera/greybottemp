multiple coprocesses: https://gist.github.com/izabera/14e5d3b1c63abe076b42