You can detect a dangling symlink using [[ -L $foo && ! -e $foo ]]